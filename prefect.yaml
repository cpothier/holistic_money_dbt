# Welcome to your prefect.yaml file! You can use this file for storing and managing
# configuration for deploying your flows. We recommend committing this file to source
# control along with your flow code.

# Generic metadata about this project
name: holistic_money_dbt
prefect-version: 3.3.7

# build section specifies steps to run when building the deployment image/environment
build:
# - prefect.deployments.steps.pip_install_requirements:
#     requirements_file: scripts/requirements.txt
#     directory: . # Explicitly set directory relative to prefect.yaml
- prefect.deployments.steps.run_shell_script: # Use a simple echo command for testing
    script: echo "Build step check: Running pip install..." && pip install -r scripts/requirements.txt
    # We still try to install, but the echo gives us a log marker

# push section allows you to manage if and how this project is uploaded to remote locations
push: null

# pull section only needs git clone
pull:
- prefect.deployments.steps.git_clone:
    repository: https://github.com/cpothier/holistic_money_dbt.git
    branch: main

# the deployments section allows you to provide configuration for deploying flows
deployments:
- name: DBT Installation Deployment
  version: null
  tags: []
  concurrency_limit: null
  description: null
  entrypoint: scripts/run_clients_flow.py:process_all_clients
  parameters: {}
  work_pool:
    name: default-work-pool
    work_queue_name: null
    job_variables: {}
  schedules:
  - interval: 1800.0
    anchor_date: '2025-04-29T17:06:04.445874+00:00'
    timezone: UTC
    active: true 